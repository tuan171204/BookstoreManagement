@using Microsoft.AspNetCore.Identity
@using BookstoreManagement.Models;
@inject UserManager<AppUser> UserManager;


@* IEnumerable<T> = List kiểu <T> *@
@model IEnumerable<BookstoreManagement.Models.Customer>

@{
    Layout = "_Layout";
    ViewData["Title"] = "Quản lý khách hàng";
}



<h2 class="content-title">@ViewData["Title"]</h2>
<partial name="_InputTextbox" />

<table class="table table-hover text-center customer-table">
    <thead>
        <tr>
            <th>Họ tên</th>
            <th>Số điện thoại</th>
            <th>Email</th>
            <th>Tình trạng</th>
        </tr>
    </thead>
    <tbody>
        @foreach (Customer customer in Model)
        {
            <tr>
                <td>@customer.FullName</td>
                <td>@customer.Phone</td>
                <td>@customer.Email</td>
                <td>
                    @if (customer.IsActive ?? false)
                    {
                        <span class="badge bg-success">Hoạt động</span>
                    }
                    else
                    {
                        <span class="badge bg-danger">Tạm khóa</span>
                    }
                </td>
            </tr>
        }
    </tbody>
</table>


<script>
    // Lấy tất cả các hàng trong bảng
    const rows = document.querySelectorAll(".customer-table tbody tr");

    // Biến để nhớ hàng đang được chọn
    let selectedRow = null;

    rows.forEach(row => {
        row.addEventListener("click", (event) => {
            event.stopPropagation();

            // Bỏ chọn hàng trước đó
            if (selectedRow) {
                selectedRow.classList.remove("active-row");
            }

            // Đánh dấu hàng hiện tại
            row.classList.add("active-row");
            selectedRow = row;
        });
    });

    // Khi click ra ngoài bảng thì bỏ chọn
    document.addEventListener("click", (event) => {
        const isClickInsideTable = event.target.closest(".customer-table");
        if (!isClickInsideTable && selectedRow) {
            selectedRow.classList.remove("active-row");
            selectedRow = null;
        }
    });
</script>